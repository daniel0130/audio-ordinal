<!DOCTYPE html>
<title>BOT 1t5</title>
<link rel="stylesheet" href="s.css">
<canvas id="cv"></canvas>
<script src="g.js"></script>
<script src="c.js"></script>
<script src="d.js"></script>
<script>
    let cci = 4; // Initial CCI value
    const initialCCI = 4; // Store the initial value of cci to reset later
    let seed = 1; // Seed value, can be adjusted for production purposes

    // Function to calculate cci based on seed
    // This example simply uses the seed to modulate within a 1-100 range but can be made more complex
    function calculateCCI(channelIndex) {
        return ((channelIndex + seed) % 100) + 1;
    }

    const channelPlaybackListener = new BroadcastChannel('channel_playback');
    channelPlaybackListener.onmessage = (event) => {
        if (event.data.action === 'stop') {
            cci = initialCCI; // Reset to initial cci value when stop is received
            console.log(`Stop received. CCI reset to initial value ${initialCCI}`);
        } else {
            const { channelIndex } = event.data;
            cci = calculateCCI(channelIndex); // Update the CCI based on the seed and channel index
            console.log(`Received channel playback: Channel ${channelIndex}. CCI updated to ${cci} based on seed ${seed}.`);
        }
    };
</script>

