console.log("channelsForeach.js entered"),channels.forEach(((e,t)=>{e.dataset.id=`Channel-${t}`;const n=audioContext.createGain();n.gain.value=1,n.connect(audioContext.destination),gainNodes[t]=n;const o=e.querySelector(".mute-button");o.addEventListener("click",(()=>{console.log(`Mute button clicked for Channel-${t}`);const n=o.classList.toggle("selected");updateMuteState(e,n),updateDimState(e,t)}));const l=e.querySelector(".solo-button");l.addEventListener("click",(()=>{soloedChannels[t]=!soloedChannels[t],l.classList.toggle("selected",soloedChannels[t]),channels.forEach(((e,n)=>{t===n?updateMuteState(e,!1):updateMuteState(e,soloedChannels[t]),updateDimState(e,n)}))}));const c=e.querySelector(".clear-button");e.querySelector(".clear-confirm");let a;c.addEventListener("click",(n=>{if(n.stopPropagation(),c.classList.contains("flashing")){e.querySelectorAll(".step-button").forEach((e=>{e.classList.remove("selected")}));let n=Array(64).fill(!1);for(let e=0;e<n.length;e++)window.unifiedSequencerSettings.updateStepState(currentSequence,t,e,n[e]);clearTimeout(a),c.classList.remove("flashing")}else c.classList.add("flashing"),a=setTimeout((()=>{c.classList.remove("flashing")}),2e3)})),document.addEventListener("click",(e=>{!c.contains(e.target)&&c.classList.contains("flashing")&&(clearTimeout(a),c.classList.remove("flashing"))}));const s=e.querySelector(".load-sample-button");function i(e){const t=document.querySelector(".custom-context-menu");t&&!t.contains(e.target)&&r()}function d(e,t){const n=document.createElement("div");return n.textContent=e,Object.assign(n.style,{padding:"5px 10px",cursor:"pointer"}),n.addEventListener("mouseenter",(()=>n.style.backgroundColor="#f0f0f0")),n.addEventListener("mouseleave",(()=>n.style.backgroundColor="lightgray")),n.addEventListener("click",t),n}function r(){const e=document.querySelector(".custom-context-menu");e&&e.remove()}function u(){const e=document.querySelector(".channel-naming-modal");e&&document.body.removeChild(e)}s.addEventListener("click",(()=>{setupLoadSampleModalButton(e,t)})),s.addEventListener("contextmenu",(e=>{console.log("Right-click on loadSampleButton"),e.preventDefault(),function(e,t,n,o,l){console.log("Creating custom context menu"),r();const c=function(e,t){const n=document.createElement("div");return n.className="custom-context-menu",Object.assign(n.style,{position:"absolute",top:`${t}px`,left:`${e}px`,backgroundColor:"lightgray",color:"black",padding:"10px",border:"1px solid #ddd",borderRadius:"5px",boxShadow:"0px 2px 5px rgba(0,0,0,0.2)"}),n}(t,n),a=d("Add User Channel Name",(()=>{!function(e){u();const t=document.createElement("div");t.className="channel-naming-modal";const n=document.createElement("input");n.type="text",n.placeholder="Give this channel a name",n.className="channel-name-input";const o=document.createElement("button");o.textContent="Submit",o.onclick=()=>{n.value&&window.unifiedSequencerSettings.setProjectChannelName(e,n.value),u()};const l=document.createElement("button");l.textContent="Cancel",l.onclick=u,t.appendChild(n),t.appendChild(o),t.appendChild(l),document.body.appendChild(t),document.addEventListener("click",(e=>{t.contains(e.target)||e.target.matches(".load-sample-button")||u()}),{capture:!0,once:!0})}(o),r()})),s=d("Copy Ordinal ID",(()=>{!function(e){const t=window.unifiedSequencerSettings.channelURLs(e);if(!t)return void console.log("No URL found for channel:",e);navigator.clipboard.writeText(t).then((()=>console.log("Full URL copied:",t))).catch((e=>console.error("Error copying URL:",e)))}(o),console.log("Copy Ordinal ID clicked"),r()})),p=d("Copy Channel Settings (coming soon)",(()=>{console.log("Copy Channel Settings clicked"),r()})),m=d("Set Channel Colour",(()=>{console.log("Set Channel Colour option selected"),function(e,t){console.log("showColorPicker function called inside channelsForEach.js");const n=["#FF0000","#00FF00","#0000FF","#FFFF00","#00FFFF","#FF00FF","#808080","#FFFFFF","#FFA500","#800080","#008080","#000080","#800000","#008000","#FFC0CB","#D2691E"],o=document.createElement("div");o.style.position="absolute",o.style.display="grid",o.style.gridTemplateColumns="repeat(4, 1fr)",o.style.gap="1px";const l=n.length/4*20,c=e.clientY-l,a=e.clientX;console.log(`Color picker position - Top: ${c}px, Left: ${a}px`),o.style.top=c+"px",o.style.left=a+"px",n.forEach((e=>{const n=document.createElement("div");n.style.width="20px",n.style.height="20px",n.style.backgroundColor=e,n.addEventListener("click",(function(){console.log(`Color selected: ${e}`),t.style.backgroundColor=e,t.className=t.className.replace(/\bcolor-[^ ]+/g,""),t.classList.add(`color-${e.replace("#","")}`),o.remove()})),o.appendChild(n)})),document.body.appendChild(o),console.log("Color picker appended to the body. Check if it is visible in the DOM."),o.addEventListener("click",(function(e){e.stopPropagation()})),setTimeout((()=>{document.addEventListener("click",(function e(){console.log("Global click detected. Removing color picker."),o.remove(),document.removeEventListener("click",e)}))}),0),setTimeout((()=>{console.log("Removing color picker after 2 seconds."),o.remove()}),5e3)}(e,l),r()})),g=d("Paste Ordinal ID",(()=>{!function(e){navigator.clipboard.readText().then((t=>{if(isValidURL(t)){let n=[...window.unifiedSequencerSettings.settings.masterSettings.channelURLs];n[e]=t,window.unifiedSequencerSettings.setChannelURLs(n),console.log("Pasted full URL:",t)}else console.error("Invalid URL format.")})).catch((e=>console.error("Error pasting URL:",e)))}(o),r()})),h=d("Paste Channel Settings (coming soon)",(()=>{!function(e){navigator.clipboard.readText().then((t=>{let n=JSON.parse(t);window.unifiedSequencerSettings.setChannelSettings(e,n),console.log("Pasted Channel Settings:",n)})).catch((e=>console.error("Error pasting Channel Settings:",e)))}(o),r()}));c.appendChild(a),c.appendChild(m),c.appendChild(s),c.appendChild(g),c.appendChild(p),c.appendChild(h),document.body.appendChild(c),setTimeout((()=>{document.addEventListener("click",i,{capture:!0,once:!0})}),0)}(e,e.pageX,e.pageY,t,s)}))}));